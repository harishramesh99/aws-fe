(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8135:(e,s,a)=>{Promise.resolve().then(a.bind(a,1417))},1417:(e,s,a)=>{"use strict";a.d(s,{default:()=>n});var t=a(5155),l=a(2115);function n(){let[e,s]=(0,l.useState)({name:"",email:"",message:""}),[a,n]=(0,l.useState)(null),[r,c]=(0,l.useState)(""),[i,m]=(0,l.useState)(!1),[d,o]=(0,l.useState)(!1),[u,b]=(0,l.useState)(""),h=e=>{let{name:a,value:t}=e.target;s(e=>({...e,[a]:t}))},x=async t=>{t.preventDefault(),m(!0),b("");try{let t=new FormData;if(t.append("name",e.name),t.append("email",e.email),t.append("message",e.message),a&&t.append("image",a),!(await fetch("".concat("http://localhost:4000","/api/contact"),{method:"POST",body:t})).ok)throw Error("Submission failed");o(!0),s({name:"",email:"",message:""}),n(null),c(""),r&&URL.revokeObjectURL(r)}catch(e){b(e.message)}finally{m(!1)}},[p,g]=(0,l.useState)([]);(0,l.useEffect)(()=>{j()},[d]);let j=async()=>{try{let e=await fetch("".concat("http://localhost:4000","/api/submissions"));if(!e.ok)throw Error("Failed to fetch submissions");let s=await e.json();g(s)}catch(e){console.error("Error fetching submissions:",e)}};return(0,l.useEffect)(()=>()=>{r&&URL.revokeObjectURL(r)},[r]),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Contact Us"}),d&&(0,t.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:"Message sent successfully!"}),u&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2",children:"Name:"}),(0,t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:h,required:!0,className:"w-full p-2 border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2",children:"Email:"}),(0,t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:h,required:!0,className:"w-full p-2 border rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2",children:"Message:"}),(0,t.jsx)("textarea",{name:"message",value:e.message,onChange:h,required:!0,className:"w-full p-2 border rounded h-32"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-2",children:"Image (optional):"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];s&&(n(s),c(URL.createObjectURL(s)))},className:"w-full p-2 border rounded"}),r&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("img",{src:r,alt:"Upload preview",className:"h-32 object-contain"})})]}),(0,t.jsx)("button",{type:"submit",disabled:i,className:"w-full p-2 text-white rounded ".concat(i?"bg-gray-400":"bg-blue-500 hover:bg-blue-600"),children:i?"Sending...":"Submit"})]}),(0,t.jsxs)("div",{className:"mt-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Submissions"}),(0,t.jsxs)("div",{className:"space-y-4",children:[p.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.email}),(0,t.jsx)("p",{className:"text-gray-800",children:e.message}),e.image_url&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("img",{src:e.image_url,alt:"Submission attachment",className:"max-h-40 object-contain rounded"})})]},e.id)),0===p.length&&(0,t.jsx)("p",{className:"text-gray-500 text-center",children:"No submissions yet"})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,517,358],()=>s(8135)),_N_E=e.O()}]);